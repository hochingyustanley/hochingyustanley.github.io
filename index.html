<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Beacon å¾©æ´»å°‹å¯¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/lucide-static@0.321.0/font/lucide.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;500;700;900&display=swap');
        body { font-family: 'Noto Sans HK', sans-serif; }
        .animate-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide Icon ç°¡å–®çµ„ä»¶å°è£
        const Icon = ({ name, size = 24, className = "" }) => (
            <i data-lucide={name} style={{ width: size, height: size }} className={`lucide-${name} ${className}`}></i>
        );

        const App = () => {
            const correctAnswers = { 1: 'B', 2: 'B', 3: 'B', 4: 'B', 5: 'A' };
            const tasks = [
                { id: 1, location: 'é¢å‘èˆˆè¯è¡— (ç»ç’ƒå¹•ç‰†)', hint: 'ç•™æ„çª—å¤–çš„èŠ±åœ’å½¢ç‹€...' },
                { id: 2, location: 'é¢å‘è˜‡å±‹é‚¨ (åŒ—é¢çª—æˆ¶)', hint: 'è§€å¯Ÿå¤§å»ˆçš„åå­—...' },
                { id: 3, location: 'é¢å‘é †å¯§é“ (èˆŠå€æ–¹å‘)', hint: 'èä¸€èç©ºæ°£ä¸­çš„è±†é¦™...' },
                { id: 4, location: 'ä¸­å¿ƒå¤§å ‚ (æ–°è¨­æ–½å€)', hint: 'çœ‹çœ‹æˆ‘å€‘çš„è¨­è¨ˆæ¦‚å¿µ...' },
                { id: 5, location: 'ä¸­å¿ƒæ­£é–€ (å…¥å£è™•)', hint: 'æ­¡è¿ä¾†åˆ° The Beacon...' }
            ];

            const [userAnswers, setUserAnswers] = useState({});
            const [activeTask, setActiveTask] = useState(null);
            const [gameState, setGameState] = useState('list');
            const [errorIds, setErrorIds] = useState([]);
            const [currentTime, setCurrentTime] = useState(new Date().toLocaleTimeString());

            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date().toLocaleTimeString()), 1000);
                if (window.lucide) window.lucide.createIcons();
                return () => clearInterval(timer);
            }, [gameState, activeTask]);

            const handleAnswer = (option) => {
                setUserAnswers({ ...userAnswers, [activeTask.id]: option });
                setGameState('list');
                setActiveTask(null);
            };

            const checkResults = () => {
                const mistakes = tasks.filter(t => userAnswers[t.id] !== correctAnswers[t.id]).map(t => t.id);
                if (mistakes.length === 0 && Object.keys(userAnswers).length === tasks.length) {
                    setGameState('result');
                } else {
                    setErrorIds(mistakes);
                    if (Object.keys(userAnswers).length < tasks.length) alert('è«‹å…ˆå®Œæˆæ‰€æœ‰ä»»å‹™ï¼');
                    else alert('éƒ¨åˆ†ç­”æ¡ˆä¸æ­£ç¢ºï¼Œè«‹é‡æ–°è§€å¯Ÿã€‚');
                }
            };

            return (
                <div className="min-h-screen pb-10">
                    <header className="bg-sky-600 text-white p-6 rounded-b-3xl shadow-lg mb-6">
                        <h1 className="text-2xl font-bold flex items-center gap-2">The Beacon å¾©æ´»å°‹å¯¶</h1>
                        <p className="text-sky-100 text-sm mt-1">é•·æ²™ç£ç¤¾å€æ¢ç´¢ä¹‹æ—…</p>
                    </header>

                    <main className="px-5">
                        {gameState === 'list' && (
                            <div className="space-y-4 animate-in">
                                <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded-r-lg text-sm text-yellow-800">
                                    æŒ‡ä»¤ï¼šè«‹åˆ°æŒ‡å®šæ–¹ä½å°‹æ‰¾è²¼ç´™ï¼Œæ ¹æ“šå¯¦é«”é¡Œç›®é¸æ“‡ç­”æ¡ˆã€‚
                                </div>
                                {tasks.map(task => (
                                    <div key={task.id} onClick={() => { setActiveTask(task); setGameState('quiz'); }}
                                        className={`p-5 rounded-2xl bg-white shadow-sm border-2 transition-all ${userAnswers[task.id] ? 'border-green-200 bg-green-50' : errorIds.includes(task.id) ? 'border-red-200 bg-red-50' : 'border-transparent'}`}>
                                        <div className="flex justify-between items-center">
                                            <div className="flex items-center gap-3">
                                                <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold ${userAnswers[task.id] ? 'bg-green-500 text-white' : 'bg-sky-100 text-sky-600'}`}>{task.id}</div>
                                                <div>
                                                    <h3 className="font-bold">ä»»å‹™ #{task.id}</h3>
                                                    <p className="text-sm text-slate-500">{task.location}</p>
                                                </div>
                                            </div>
                                            {userAnswers[task.id] ? <span className="text-green-500">âœ“</span> : <span className="text-slate-300">â—‹</span>}
                                        </div>
                                        {errorIds.includes(task.id) && <p className="mt-2 text-xs text-red-500 font-bold">éœ€è¦é‡æ–°è§€å¯Ÿï¼è²¼å£«ï¼š{task.hint}</p>}
                                    </div>
                                ))}
                                <button onClick={checkResults} disabled={Object.keys(userAnswers).length < tasks.length}
                                    className={`w-full py-4 rounded-2xl font-bold mt-6 shadow-lg ${Object.keys(userAnswers).length === tasks.length ? 'bg-yellow-400' : 'bg-slate-200 text-slate-400'}`}>æäº¤æª¢æŸ¥</button>
                            </div>
                        )}

                        {gameState === 'quiz' && (
                            <div className="animate-in">
                                <button onClick={() => setGameState('list')} className="text-sky-600 font-medium mb-6 flex items-center gap-1">â† è¿”å›åˆ—è¡¨</button>
                                <div className="bg-white rounded-3xl p-8 shadow-xl text-center border-t-8 border-yellow-400">
                                    <span className="inline-block px-4 py-1 bg-sky-100 text-sky-700 rounded-full text-sm font-bold mb-4">{activeTask.location}</span>
                                    <h2 className="text-xl font-bold mb-8">è«‹æ ¹æ“šè²¼ç´™ä¸Šçš„é¡Œç›®é¸æ“‡ï¼š</h2>
                                    <div className="grid grid-cols-2 gap-4">
                                        {['A', 'B', 'C', 'D'].map(opt => (
                                            <button key={opt} onClick={() => handleAnswer(opt)}
                                                className={`h-24 rounded-2xl text-2xl font-black ${userAnswers[activeTask.id] === opt ? 'bg-sky-600 text-white' : 'bg-slate-100 text-slate-600'}`}>{opt}</button>
                                        ))}
                                    </div>
                                    <div className="mt-8 p-4 bg-yellow-50 rounded-xl text-left text-sm text-yellow-800">
                                        <strong>å°è²¼å£«ï¼š</strong><br/>{activeTask.hint}
                                    </div>
                                </div>
                            </div>
                        )}

                        {gameState === 'result' && (
                            <div className="text-center animate-in">
                                <div className="bg-white rounded-3xl p-8 shadow-2xl border-4 border-yellow-400">
                                    <div className="text-5xl mb-4">ğŸ†</div>
                                    <h2 className="text-3xl font-black mb-2">æ­å–œå®Œæˆï¼</h2>
                                    <p className="text-slate-500 mb-6">ä½ å·²æ­£å¼æˆç‚ºã€Œè˜‡å±‹ç¤¾å€é”äººã€</p>
                                    <div className="bg-slate-900 text-white p-6 rounded-2xl mb-6">
                                        <p className="text-xs text-slate-400 mb-1">ç¦®å“æ›é ˜ä¿¡</p>
                                        <div className="text-2xl font-mono font-bold text-yellow-300">BEACON-2026-HQ</div>
                                        <div className="mt-4 border-t border-slate-700 pt-4">
                                            <p className="text-lg font-bold">{currentTime}</p>
                                            <p className="text-[10px] text-slate-500">æ­¤ç•«é¢å¯¦æ™‚æ›´æ–°ï¼Œè«‹å‹¿æˆªåœ–</p>
                                        </div>
                                    </div>
                                    <p className="text-sm text-slate-400 italic">è«‹å‘æ«ƒæª¯åŒäº‹å‡ºç¤ºæ­¤é é¢</p>
                                </div>
                                <button onClick={() => {setUserAnswers({}); setGameState('list');}} className="mt-8 text-slate-400 text-sm">é‡æ–°é–‹å§‹</button>
                            </div>
                        )}
                    </main>
                    <footer className="mt-10 text-center text-slate-400 text-xs px-10">
                        <p>Â© 2026 YMCA of Hong Kong - The Beacon (æ¸¯é’è€€ä¿¡)</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>